{% extends 'base.html' %}
{% block title %}{{ title }} - FactGuard{% endblock %}
{% block page_title %}{{ title }}{% endblock %}

{% block content %}
<div class="bg-white rounded-xl shadow-lg p-6 max-w-lg mx-auto mt-8">
    <div class="text-center">
        <!-- Icône d'avertissement -->
        <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4">
            <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
        </div>
        
        {% if analysis %}
            <!-- Suppression d'une analyse spécifique -->
            <h3 class="text-lg font-medium text-gray-900 mb-4">
                Supprimer cette analyse ?
            </h3>
            <div class="bg-gray-50 rounded-lg p-4 mb-6">
                <p class="text-sm text-gray-700 mb-2">
                    <strong>Type :</strong> {{ analysis.type_display|default:"Texte" }}
                </p>
                <p class="text-sm text-gray-700 mb-2">
                    <strong>Contenu :</strong> {{ analysis.text|truncatechars:120 }}
                </p>
                <p class="text-xs text-gray-500">
                    Créée le {{ analysis.created_at|date:"d/m/Y à H:i" }}
                </p>
            </div>
            <p class="text-sm text-gray-500 mb-6">
                Cette action est <strong>irréversible</strong>. L'analyse sera définitivement supprimée.
            </p>
        {% else %}
            <!-- Suppression de tout l'historique -->
            <h3 class="text-lg font-medium text-gray-900 mb-4">
                Vider tout l'historique ?
            </h3>
            <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                <p class="text-lg font-semibold text-red-800 mb-2">
                    {{ analyses_count }} analyses seront supprimées
                </p>
                <p class="text-sm text-red-600">
                    Toutes vos données d'analyse seront perdues définitivement
                </p>
            </div>
            <p class="text-sm text-gray-500 mb-6">
                Cette action est <strong>irréversible</strong>. Vous ne pourrez pas récupérer vos analyses.
            </p>
        {% endif %}
        
        <!-- Boutons de confirmation -->
        <div class="flex justify-center space-x-4">
            <a href="{% url 'dashboard:history' %}" 
               class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium px-6 py-2 rounded-lg transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>Annuler
            </a>
            <form method="post" class="inline">
                {% csrf_token %}
                <button type="submit" 
                        class="bg-red-600 hover:bg-red-700 text-white font-medium px-6 py-2 rounded-lg transition-colors">
                    <i class="fas fa-trash mr-2"></i>
                    {% if analysis %}Supprimer l'analyse{% else %}Vider l'historique{% endif %}
                </button>
            </form>
        </div>
        
        {% if not analysis %}
            <div class="mt-6 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                <p class="text-xs text-blue-700">
                    <i class="fas fa-info-circle mr-1"></i>
                    <strong>Alternative :</strong> Vous pouvez aussi supprimer les analyses une par une depuis l'historique
                </p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
